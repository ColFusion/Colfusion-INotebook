<!DOCTYPE html>
<html>

    <head>
        <meta charset='utf-8' />
        <meta http-equiv="X-UA-Compatible" content="chrome=1" />
        <meta name="description" content="Slate is a responsive theme for GitHub Pages" />

        <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

        <title>MultiDBs-INotebook-Server : Use IPython Notebook to analyze data</title>
    </head>

    <body>

        <!-- HEADER -->
        <div id="header_wrap" class="outer">
            <header class="inner">
                <a id="forkme_banner" href="https://github.com/infsci2711/MultiDBs-INotebook-Server">View on GitHub</a>

                <h1 id="project_title">MultiDBs-INotebook-Server</h1>
                <h2 id="project_tagline">Use IPython Notebook to analyze data</h2>
            </header>
        </div>

        <!-- MAIN CONTENT -->
        <div id="main_content_wrap" class="outer">
            <section id="main_content" class="inner">
                <br/>
                <h2>Description</h2>
                <p>MultiDBs INotebook Project is a sub-project for MultiDBs project. It aims to utilize iPython(Jupyter) notebook to do data analysis on MultiDBs datasets.</p>
                <br/>

                <h2>Install iPython</h2>

                <p>Installing IPython is the first step we should take. Here is simple introduction of several ways to install IPython. For more information, please visit  <a href="http://ipython.org/notebook.html">Install IPython</a> to get simplified installation instructions that should work for most of the users.</p>
                <ul>
                    <li>
                        <P>If you already have Python, you can get IPthon with <a href="https://pypi.python.org/pypi/pip"> pip</a></P>
                        <div class="highlight">
                            <code class="language-xml" data-lang="xml">
                                pip install ipython
                            </code>
                        </div>
                        <p>Or if you want to also get the dependencies for the IPython notebook:</p>
                        <div class="highlight">
                            <code class="language-xml" data-lang="xml">
                                pip install "ipython[notebook]"
                            </code>
                        </div>
                    </li>
                    <li>
                        <P>For a new starter, you are suggested to  get IPython with the <a href="http://continuum.io/downloads">Anaconda</a> or <a href="https://store.enthought.com/downloads/">Canopy</a> Python distributions, which provide Python 2.7, IPython and all of its dependences as well as a complete set of open source packages for scientific computing and data science.</P>
                        <div class="highlight"><pre><code class="language-xml" data-lang="xml">
%%for Anaconda:
conda update conda
conda update ipython ipython-notebook ipython-qtconsole
                      
%%Enthought Canopy:
enpkg ipython
        </code></pre></div>
                    </li>
                </ul>
                <br/>

                <h2>Install Server and Configuration Alert</h2>
                <p><span>Note</span>:All the following configuration is based on AWS(Ubuntu 14.04.1 LTS). There may be some configuration errors on other kinds of server system. You can always send emails to wuplus1992@gmail.com for technical support</p>
                <p>There are two servers in our system: Java server for portal website and ipython server to deal with actual notebook staffs. 

                <p>Before starting up the server, users need to make sure that the port 8888 is open to public, and is not binding to other process. It is reserved for jupyter server.<p>

                <p>The first part of installation is to install mysql server, with password root for user root, it should automatically set “root” as password of “root” mysql user. If it fails, you should try to replace the password with your own. 
                <div class="highlight"><pre><code class="language-xml" data-lang="xml">
echo mysql-server mysql-server/root_password password root | sudo debconf-set-selections

echo mysql-server mysql-server/root_password_again password root | sudo debconf-set-selections
                </code></pre></div>
                </p>

                <p>The second part of installation is install java server. System will download server from git, make some configuration, and start server. In “Jupyter Notebook for multi-user”, we install jupyter server which is a multi-user version of ipython.</p>

                <p>In this part, the server will use a default port 7654. If you want to change it to another port, please refer to config.properties file and change the port in the first line</p>

                <p>The last part is to modify some ipython build-in files to implement some customize functionalities. You can change the defalut ipython path to your own one if your ipythn is not installed in the default directory
                <div class="highlight"><pre><code class="language-xml" data-lang="xml">
# Copy jupyter server configuration file from git
# Replace the IPython directory with your own one
cp opt/project/MultiDBs-INotebook-IPython-Extention/js/main.js /usr/local/lib/python3.4/dist-packages/IPython/html/static/notebook/js/main.js

cp opt/project/MultiDBs-INotebook-IPython-Extention/css/overiride.css /usr/local/lib/python3.4/dist-packages/IPython/html/static/notebook/css/overiride.css
                </code></pre></div>
                </p>
                
                <p>After setting all the configuration in the startup.sh, just start up the server in a clean machine, run startup.sh in the project directory. 
                <div class="highlight"><pre><code class="language-xml" data-lang="xml">
sudo ./startup.sh
                </code></pre></div>
                </p>


                <h2>How to use</h2>

                <p>
                <ol>
                    <li>Register a new account</li>
                    <p>Open the <a href="http://54.152.29.103/Register.html">Rigister page</a>. Input your user name, email address and password.</p>
                    <img height="250" src="images/register.png"/>

                    <li>Log in</li>
                    <p>Open the <a href="http://54.152.29.103:8888/hub/login">Log in page</a>. Input the user name and password in step 1. Or use the defualt account (username: student, password: infsci27115).</p>
                    <img height="250" src="images/login.png"/>

                    <li>Open your server</li>
                    <p>When you enter the Jupyterhub page, click the green <code> My Server</code> button. The page will jump to your home page that lists all your files.</p>
                    <img height="300" src="images/jupyterhub.png"/>
                    <img height="300" src="images/homepage.png"/>

                    <li>Create new documents</li>
                    <p>Click the <code>New</code> button on the right part of the page and select a file type. For this project, you should create <code>Python 3</code>.</p>
                    <img height="250" src="images/new.png"/>

                    <li>Connect to a database</li>
                    <p>Select a database in the pull-down menu to connect. Then click the cloud button next to the database menu. The first cell will display the database information. </p>
                    <img height="150" src="images/database.png"/>
                    <img height="300" src="images/connect.png"/>

                    <li>Use data from database</li>
                    <p>Now, you can start to use the data to do analysis. For example, if you want to get the data of two columns "mpg" and "horsepower" from database "car". you can execute a SQL statement <code>select horsepower, mpg from 25.cars</code>in notebook cell. Than you will get the data from the databse. The data is displayed in the form of JSON object.</p>
                    <img src=""></img>
                    <p>You can uniform the data to discard schema and to convert data type using Python. The following code gives an example of data pre-processing and scatter plot.</p>
                    <p>
                    <div class="highlight"><pre><code class="language-xml" data-lang="python">
%matplotlib inline
import matplotlib.pyplot as plt

data=data0['data']
dataset1=[]
dataset2=[]
for i in range(len(data)):
    dataset1.insert(i,int(data[i]['row'][0]))
for i in range(len(data)):
    dataset2.insert(i,int(data[i]['row'][1]))

x = dataset1
y = dataset2

plt.scatter(x,y)
plt.show()
        </code></pre></div></p>
                    <img src=""></img>
                </ol>
                </p>
                <br/>

                <h2>APIs</h2>

                <p>
                    <ul>
                        <li>To register a new user in iPython Notebook, the API is:</li>
                        <p>Path: http://54.152.29.103:7654/User</p>
                        <p>Method: PUT</p>
                        <p>JSON: {"username": "myName", "email": "myEmail", "password": "password"}</p>
                        <p>Return Type: "1" - success; "-1" - failure.</p>
                    </ul>
                </p>
                <br/>
                
                <h2>Acknowledge</h2>
                    <p>Thanks for all the advice and help from <a href='https://github.com/EvgenyKarataev'>Evgeny Karataev</a>, the teacher for INFSCI2711. </p>
                <h2>Team Members</h2>
                
                <ul id="team-members">
                    <li>
                        <a href="https://github.com/ianhu92">Hu Yiheng</a>
                    </li>
                    
                    <li>
                        <a href="https://github.com/InternetFarmer">Wu Jiadong</a>
                    </li>
                    
                    <li>
                        <a href="https://github.com/stefxyx">Xie Yinxing</a>
                    </li>
                    
                    <li>
                        <a href="https://github.com/nancyzqqq">Zhang Qian</a>
                    </li>
                    
                    <li>
                        <a href="https://github.com/zyyswallow">Zhou Yanyan</a>
                    </li>
                </ul>
                
            </section>
        </div>

        <!-- FOOTER  -->
        <div id="footer_wrap" class="outer">
            <footer class="inner">
                <p class="copyright">Slate theme maintained by <a href="https://github.com/jasoncostello">Jason Costello</a></p>
                <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
            </footer>
        </div>

    </body>
</html>
